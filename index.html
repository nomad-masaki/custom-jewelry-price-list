
<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>アクセサリー価格計算</title>
    <link rel="stylesheet" href="./styles.css">
  </head>
  <body>
    <div class="container">
      <div class="card">
        <div class="header">
          <div>
            <div class="title">
              <img src="./images/page_logo.jpg" alt="アクセサリー価格計算" class="page-logo">
            </div>
            <div class="sub">本体 / バチカン / チェーン / ストーン を選ぶと価格が表示されます</div>
          </div>
          <button class="btn secondary" onclick="location.reload()">リセット</button>
        </div>

        <div class="grid">
          <div>
            <div class="preview">
              <div class="key-info">
                <div class="sub">選択中のキー</div>
                <div class="badgeWrap" id="badges"></div>
              </div>
              
              <!-- アクセサリーのレイヤー表示 -->
              <div class="accessory-layers-container" id="accessoryLayers">
                <!-- レイヤー画像が動的に追加される -->
              </div>
            </div>
            <div class="priceBox">
              <div class="row"><span class="label">商品コード</span><span class="value mono" id="skuText">-</span></div>
              <div class="row"><span class="label">上代（税抜き）</span><span class="value big" id="priceText">パーツを選択すると金額が表示されます</span></div>
              <div class="row" style="display: none;"><span class="label">内税（10%）</span><span class="value" id="taxText">-</span></div>
            </div>
          </div>

          <div class="controls">
            <div class="main-selection-grid">
              <div class="field">
                <label for="bodySel">本体</label>
                <select id="bodySel"></select>
              </div>
              <div class="field">
                <label for="bailSel">バチカン</label>
                <select id="bailSel"></select>
              </div>
              <div class="field">
                <label for="chainSel">チェーン</label>
                <select id="chainSel"></select>
              </div>
              <div class="field">
                <label for="stoneSel">ストーン</label>
                <select id="stoneSel"></select>
                <button id="stoneModalBtn" class="btn primary" style="display: none; margin-top: 8px;">
                  ストーン詳細設定
                </button>
              </div>
            </div>
            
            <!-- 石選択コンポーネント -->
            <div id="individualStoneSection" class="stone-selection-component" style="display: none;">
              <div class="group-settings">
                <label class="toggle-label">
                  <input type="checkbox" id="groupToggleAT" />
                  <span class="toggle-text">たてがみ グループ設定</span>
                </label>
                <label class="toggle-label">
                  <input type="checkbox" id="groupToggleAd" />
                  <span class="toggle-text">目＆牙グループ設定</span>
                </label>
                <label class="toggle-label">
                  <input type="checkbox" id="groupToggle16" />
                  <span class="toggle-text">バチカングループ設定</span>
                </label>
              </div>
              
              <div class="stone-selection-content">
                <h4>たてがみ（A〜T）</h4>
                <div class="group-controls" id="groupControlAT">
                  <select id="groupStoneAT" class="group-select">
                    <option value="">選択してください</option>
                  </select>
                </div>
                <div class="individual-controls" id="individualControlAT">
                  <div class="stone-grid mane-grid">
                    <!-- A〜Tの個別設定 -->
                  </div>
                </div>

                <h4>目＆牙（a〜d）</h4>
                <div class="group-controls" id="groupControlAd">
                  <select id="groupStoneAd" class="group-select">
                    <option value="">選択してください</option>
                  </select>
                </div>
                <div class="individual-controls" id="individualControlAd">
                  <div class="stone-grid eye-tooth-grid">
                    <!-- a〜dの個別設定 -->
                  </div>
                </div>

                <h4>バチカン（1〜6）</h4>
                <div class="group-controls" id="groupControl16">
                  <select id="groupStone16" class="group-select">
                    <option value="">選択してください</option>
                  </select>
                </div>
                <div class="individual-controls" id="individualControl16">
                  <div class="stone-grid vatican-grid">
                    <!-- 1〜6の個別設定 -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ストーン設定モーダル -->
    <div id="stoneModal" class="stone-modal" style="display: none;">
      <div class="stone-modal-content">
        <!-- プレビューエリア（5割） -->
        <div class="stone-modal-preview">
          <div class="preview">
            <div class="accessory-layers-container" id="modalAccessoryLayers">
              <!-- レイヤー画像が動的に追加される -->
            </div>
          </div>
        </div>
        
        <!-- 石選択エリア（4割） -->
        <div class="stone-modal-selection">
          <div class="group-settings">
            <label class="toggle-label">
              <input type="checkbox" id="modalGroupToggleAT" />
              <span class="toggle-text">たてがみ グループ設定</span>
            </label>
            <label class="toggle-label">
              <input type="checkbox" id="modalGroupToggleAd" />
              <span class="toggle-text">目＆牙グループ設定</span>
            </label>
            <label class="toggle-label">
              <input type="checkbox" id="modalGroupToggle16" />
              <span class="toggle-text">バチカングループ設定</span>
            </label>
          </div>
          
          <div class="stone-selection-content">
            <h4>たてがみ（A〜T）</h4>
            <div class="group-controls" id="modalGroupControlAT">
              <select id="modalGroupStoneAT" class="group-select">
                <option value="">選択してください</option>
              </select>
            </div>
            <div class="individual-controls" id="modalIndividualControlAT">
              <div class="stone-grid mane-grid">
                <!-- A〜Tの個別設定 -->
              </div>
            </div>

            <h4>目＆牙（a〜d）</h4>
            <div class="group-controls" id="modalGroupControlAd">
              <select id="modalGroupStoneAd" class="group-select">
                <option value="">選択してください</option>
              </select>
            </div>
            <div class="individual-controls" id="modalIndividualControlAd">
              <div class="stone-grid eye-tooth-grid">
                <!-- a〜dの個別設定 -->
              </div>
            </div>

            <h4>バチカン（1〜6）</h4>
            <div class="group-controls" id="modalGroupControl16">
              <select id="modalGroupStone16" class="group-select">
                <option value="">選択してください</option>
              </select>
            </div>
            <div class="individual-controls" id="modalIndividualControl16">
              <div class="stone-grid vatican-grid">
                <!-- 1〜6の個別設定 -->
              </div>
            </div>
          </div>
        </div>
        
        <!-- ボタンエリア（1割） -->
        <div class="stone-modal-buttons">
          <button id="saveStoneSettings" class="btn success">保存</button>
          <button id="resetStoneSettings" class="btn primary">リセット</button>
          <button id="cancelStoneSettings" class="btn secondary">キャンセル</button>
        </div>
      </div>
    </div>


    <script src="javascript/master/price_table.js"></script>
    <script src="javascript/master/master_materials.js"></script>
    <script src="javascript/master/master_stones.js"></script>
    <script src="javascript/master/master_positions.js"></script>
    <script src="javascript/master/layer_mapping.js"></script>
    <script src="javascript/modal.js"></script>
    <script src="javascript/app.js"></script>
  </body>
</html>
